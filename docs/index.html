<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Waffel - Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="waffel">
    
    <meta name="version" content="98ff3566ca5caba1dcbc54c40d180840d7b6ad0b">
    
    
    <meta name="google-site-verification" content="i8NjOC8rJvuvTJANxL3ZU5lemfbFkovx0ZqSCYwg430">
    
    
  
  
    <meta name="description" content="Waffel is a static generator tool written in JavaScript, that covers concrete use cases like localisation, pagination, arbitrary page group generation.">
  
    <meta property="og:site_name" content="Static site generation done tasty.">
    <meta property="og:url" content="https://moonwave99.github.io/waffel/docs">
    <meta property="og:title" content="Waffel - Documentation">
    <meta property="og:image" content="https://moonwave99.github.io/waffel/images/waffel.jpg">
  
    <meta property="og:type" content="website">
    <meta property="og:description" content="Waffel is a static generator tool written in JavaScript, that covers concrete use cases like localisation, pagination, arbitrary page group generation.">
  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="https://moonwave99.github.io/waffel">
    <meta name="twitter:creator" content="@moonwavelabs">
    <meta name="twitter:url" content="https://moonwave99.github.io/waffel/docs">
    <meta name="twitter:title" content="Waffel - Documentation">
    <meta name="twitter:image:src" content="https://moonwave99.github.io/waffel/images/waffel.jpg">
  
    <meta name="twitter:description" content="Waffel is a static generator tool written in JavaScript, that covers concrete use cases like localisation, pagination, arbitrary page group generation.">
  

    <link href='//fonts.googleapis.com/css?family=Ubuntu:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Arvo:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://moonwave99.github.io/waffel/css/app.css">
  </head>
  <body class="documentation">
    
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://moonwave99.github.io/waffel/index.html#top">Waffel</a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="https://moonwave99.github.io/waffel/index.html#getting-started">Getting Started</a></li>
        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="https://moonwave99.github.io/waffel/docs/index.html">(Quick) Start</a></li>
            
            <li><a href="https://moonwave99.github.io/waffel/docs/index.html#events">Events</a></li>
            
            <li><a href="https://moonwave99.github.io/waffel/docs/index.html#options">Options</a></li>
            
            <li><a href="https://moonwave99.github.io/waffel/docs/index.html#helpers">Helpers</a></li>
            
            <li><a href="https://moonwave99.github.io/waffel/docs/index.html#filters">Filters</a></li>
            
          </ul>
        </li>
        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Examples <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
          
          <li><a href="https://moonwave99.github.io/waffel/examples/cinema-blog-ala-jekyll/index.html">A Cinema Blog, Ã  la Jekyll</a></li>
          
          <li><a href="https://moonwave99.github.io/waffel/examples/portfolio/index.html">A Photo portfolio</a></li>
          
          </ul>
        </li>
        <li><a href="https://moonwave99.github.io/waffel/index.html#philosophy">Philosophy</a></li>
        <li><a href="https://moonwave99.github.io/waffel/index.html#faq">FAQ</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/moonwave99/waffel"><i class="fa fa-github"></i> See on Github</a></li>
      </ul>
    </div>

  </div>
</nav>

  
<section class="container">
  <h1>Documentation</h1>
<h2 id="-quick-start">(Quick) Start</h2>
<p>Okay, there is no real <em>quick</em> start, because Waffel generates websites from a well structured data folder, through a <code>site.yml</code> config file and a set of HTML views. So all three elements should be there! Assuming that, this is the bare minimum example for generating your website, and serving its content via Waffel built-in webserver:</p>
<pre><code>var Waffel = require(&#39;waffel&#39;)
var port = 1337;

var wfl = new Waffel({
  domain:   &quot;http://localhost:&quot; + port,
  server:   true,
  serverConfig: {
    port:       port,
    path:       &#39;public&#39;,
    indexPath:  &#39;public/404.html&#39;
  }
})

wfl.init().then(function(data){ wfl.generate() })
</code></pre><p><strong>Note:</strong> Why <code>wfl.init().then( ... )</code>?
This way, you have the chance to intercept the <code>data</code> after parsing the files but <em>before</em> generating the actual website, in case that you want to process/merge it with other stuff.</p>
<h2 id="events">Events</h2>
<p>Waffel instances are <a href="https://nodejs.org/api/events.html#events_class_eventemitter"><code>EventEmitters</code></a>, and emit the following events specifically:</p>
<ul>
<li><code>generation:start</code>: emitted when the <code>generate()</code> method is called;</li>
<li><code>generation:complete</code>: emitted after generating all the pages;</li>
<li><code>server:start</code>: emitted when the built-in webserver is started (if <code>server: true</code> was set in the options), after generation is complete.</li>
</ul>
<h2 id="options">Options</h2>
<p>You can pass an hash of options to Waffel at creation time, like:</p>
<pre><code>var Waffel = require(&#39;waffel&#39;)
...
var wfl = new Waffel({
  domain: &#39;http://example.com&#39;,
  ...
})
</code></pre><p>Let&#39;s inspect what&#39;s available:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepts</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>silent</code></td>
<td>If <code>true</code>, suppresses all log outputs.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>verbose</code></td>
<td>If <code>true</code>, prints single page generation information.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>versionAssets</code></td>
<td>Enables <code>{versioned:true}</code> option to append current commit hash to <code>asset()</code> helper.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>defaultPagination</code></td>
<td>Pagination size.</td>
<td>number</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>defaultSortField</code></td>
<td>Default field for collection sorting.</td>
<td>string</td>
<td><code>slug</code></td>
</tr>
<tr>
<td><code>defaultSortOrder</code></td>
<td>Default order for collection sorting.</td>
<td>string</td>
<td><code>desc</code></td>
</tr>
<tr>
<td><code>structureFile</code></td>
<td>Configuration filename.</td>
<td>string</td>
<td><code>site.yml</code></td>
</tr>
<tr>
<td><code>viewFolder</code></td>
<td>HTML Views folder.</td>
<td>string</td>
<td><code>views</code></td>
</tr>
<tr>
<td><code>dataFolder</code></td>
<td>Data files folder.</td>
<td>string</td>
<td><code>data</code></td>
</tr>
<tr>
<td><code>destinationFolder</code></td>
<td>Output folder.</td>
<td>string</td>
<td><code>public</code></td>
</tr>
<tr>
<td><code>staticFolder</code></td>
<td>Asset folder. Is copied over verbatim to the <code>destinationFolder</code>.</td>
<td>string</td>
<td><code>assets</code></td>
</tr>
<tr>
<td><code>localesFolder</code></td>
<td>Folder where translation files are stored.</td>
<td>string</td>
<td><code>locales</code></td>
</tr>
<tr>
<td><code>domain</code></td>
<td>Your website domain, e.g. <code>http://example.com</code>.</td>
<td>string</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>basePath</code></td>
<td>Specify in case your website is being served from anywhere different than <code>/</code>.</td>
<td>string</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>assetPath</code></td>
<td>If assets are served from a different location/domain than <code>/</code>.</td>
<td>string</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>sitemap</code></td>
<td>If <code>true</code>, generates sitemap.</td>
<td>boolean</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>sitemapName</code></td>
<td>Sitemap filename.</td>
<td>string</td>
<td><code>sitemap.xml</code></td>
</tr>
<tr>
<td><code>server</code></td>
<td>If <code>true</code>, starts a webserver - useful for <code>dev</code> environment.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>root</code></td>
<td>Project root folder.</td>
<td>string</td>
<td><code>process.cwd()</code></td>
</tr>
<tr>
<td><code>dataExt</code></td>
<td>Data files extension.</td>
<td>string</td>
<td><code>.md</code></td>
</tr>
<tr>
<td><code>templateExt</code></td>
<td>Template files extension.</td>
<td>string</td>
<td><code>.html</code></td>
</tr>
<tr>
<td><code>languages</code></td>
<td>Languages supported by website.</td>
<td>array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>defaultLanguage</code></td>
<td>Website default language (as ISO two-letter code).</td>
<td>string</td>
<td><code>en</code></td>
</tr>
<tr>
<td><code>fallbackLanguage</code></td>
<td>Language used if document is not present in current language.</td>
<td>string</td>
<td><code>en</code></td>
</tr>
<tr>
<td><code>localiseDefault</code></td>
<td>If <code>true</code>, prepends language slug portion even to default language documents.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>uglyUrls</code></td>
<td>If <code>true</code>, Generates <code>name.html</code> style documents, as opposed to <code>name/index.html</code>.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>outputExt</code></td>
<td>Output document file extension.</td>
<td>string</td>
<td><code>.html</code></td>
</tr>
<tr>
<td><code>displayExt</code></td>
<td>If <code>false</code>, omits file extension (useful when uploading to S3 for instance).</td>
<td>boolean</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>dateFormat</code></td>
<td>Date format used in slugs.</td>
<td>string</td>
<td><code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td><code>server</code></td>
<td>If <code>true</code>, runs a local webserver - useful for development.</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>watch</code></td>
<td>If <code>true</code>, watches <code>dataFolder</code> for changes and regenerates website - dev mode only!</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>watchInterval</code></td>
<td>Debounce interval for watching (in milliseconds).</td>
<td>number</td>
<td><code>5000</code></td>
</tr>
</tbody>
</table>
<hr>
<p>In addition, you can override local server configuration, whose defaults are:</p>
<pre><code>serverConfig: {
  port:       1999,
  path:       &#39;public&#39;,
  indexPath:  &#39;public/404.html&#39;      
}
</code></pre><ul>
<li><code>port</code> is the TCP port the server listens from;</li>
<li><code>path</code> is the folder being served (normally is <code>destinationFolder</code>);</li>
<li><code>indexPath</code> is the document where requests for non existing files are redirected to.</li>
</ul>
<h2 id="helpers">Helpers</h2>
<p>Waffel provides you with some helper methods, to be used in the templates.</p>
<h3 id="-url-name-data-options-"><code>url(name, data={}, options={})</code></h3>
<p>Generates a page URL from its name (e.g. <code>blog.categories</code>). Accepts a <code>data</code> object for passing slug generation parameters (e.g. <code>{ &#39;category&#39;: item.category }</code>); in single pages context, it can usually be the <code>item</code> itself.</p>
<p>The allowed <code>options</code> are:</p>
<ul>
<li><code>localised</code>, to generate localised URLs like <code>/en/category/avantgarde</code>;</li>
<li><code>language</code>, the language token to be prepended if <code>localised</code> is true;</li>
<li><code>page</code>, for paginated collections of course, e.g. <code>/category/avantgarde/page/2</code>.</li>
</ul>
<p><strong>Examples</strong> (given the <a href="https://github.com/moonwave99/waffel/blob/master/docs/examples/jekyll/site.yml">jekyll example structure</a>):</p>
<pre><code>{{ url(&#39;about&#39;) }}
</code></pre><p>Output: <code>http://localhost:3333/about/index.html</code>.</p>
<pre><code>{{ url(&#39;blog.index&#39;, {}, { &#39;page&#39;: 2 }) }}
</code></pre><p>Output: <code>http://localhost:3333/blog/page/2/index.html</code>.</p>
<pre><code>{{ url(&#39;blog.categories&#39;, { &#39;category&#39;: &#39;avantgarde&#39; }, { &#39;page&#39;: 3 }) }}
</code></pre><p>Output: <code>http://localhost:3333/blog/category/avantgarde/page/2/index.html</code>.</p>
<pre><code>{{ url(&#39;blog.tags&#39;, { &#39;tag&#39;: &#39;new&#39; }, { &#39;localised&#39;: true, &#39;language&#39;: &#39;it&#39; }) }}
</code></pre><p>Output: <code>http://localhost:3333/it/blog/tag/new/index.html</code>.</p>
<hr>
<p><strong>Note:</strong> output assumes default Waffel configuration, i.e. <code>uglyUrls</code> set to <code>false</code>.</p>
<h3 id="-asset-_path-options-"><code>asset(_path = &#39;&#39;, options = {})</code></h3>
<p>Generates an asset URL from its relative <code>_path</code>, e.g. <code>/images/background_image.jpg</code>. If <code>options.versioned</code> is <code>true</code>, it appends <code>_#{rev}</code> to <code>_path</code> basename, where <code>rev</code> is latest commit hash of current repository (if any).</p>
<p><strong>Note:</strong> Waffel does not rename your files, you should do on your own before or after generating the website!</p>
<p><strong>Examples</strong>:</p>
<pre><code>{{ asset(&#39;js/app.js&#39;) }}
</code></pre><p>Output: <code>http://localhost:3333/js/app.js</code>.</p>
<pre><code>{{ asset(&#39;css/app.css&#39;, { &#39;versioned&#39;: true }) }}
</code></pre><p>Output: <code>http://localhost:3333/css/app_be6cb96bd8d3147b571d8452ab4a933df9249618.css</code>.</p>
<h3 id="-t-key-"><code>t(key)</code></h3>
<p>Exposes <code>i18next</code> localisation feature.</p>
<h3 id="-loc-data-language-"><code>loc(data={}, language)</code></h3>
<p>If current page <code>item</code> is localised (i.e. holds data stored in different languages), it returns data for required language.</p>
<p>Why not just <code>item[language]</code>? Because <code>loc()</code> holds logic for fallbacking to default or fallback language, and for dealing with entire collections of items.</p>
<p>So if <code>item</code> is:</p>
<pre><code>{
  &quot;_localised&quot; : true,
  &quot;en&quot;: {
    &quot;title&quot; : &quot;The  Title&quot;,
    &quot;category&quot;: &quot;the-category&quot;
  },
  &quot;it&quot;: {
    &quot;title&quot; : &quot;Il Titolo&quot;,
    &quot;category&quot;: &quot;la-categoria&quot;
  }  
}
</code></pre><p><code>loc(item, &#39;it&#39;)</code> will return:</p>
<pre><code>{
  &quot;title&quot; : &quot;Il Titolo&quot;,
  &quot;category&quot;: &quot;la-categoria&quot;
}
</code></pre><p>And <code>loc(item, &#39;de&#39;)</code> will return:</p>
<pre><code>{
  &quot;title&quot; : &quot;The  Title&quot;,
  &quot;category&quot;: &quot;the-category&quot;
}
</code></pre><p>Because <code>options.fallbackLanguage</code> defaults to <code>en</code>.</p>
<h2 id="filters">Filters</h2>
<p>Amoung <a href="https://mozilla.github.io/nunjucks/templating.html#builtin-filters">Nunjucks built-in filters</a>, Waffel exposes a bunch of useful ones.</p>
<h3 id="-array-limit-count-10-"><code>Array | limit(count=10)</code></h3>
<p>Slices array to <code>count elements</code>, e.g. <code>{{ [1,2,3] | limit(2) }}</code> outputs <code>[1,2]</code>.</p>
<h3 id="-date-format-format-"><code>Date | format(format)</code></h3>
<p>Formats filtered <code>Date</code> against provided format, via <a href="http://momentjs.com/">moment.js</a>.</p>
<h3 id="-string-excerpt-size-200-"><code>String | excerpt(size=200)</code></h3>
<p>Returns a plain text excerpt of max <code>size</code> characters. Memoized for performance.</p>
<h3 id="-object-tojson-"><code>Object | toJSON()</code></h3>
<p>Exposes <code>JSON.stringify</code>. Static API ftw!</p>
<h3 id="-object-inspect-"><code>Object | inspect()</code></h3>
<p>Taps filtered object, and inspects it in the console. Use like <code>item | inspect | someOtherFilter</code>, for debugging purposes.</p>
<hr>
<p>Following <a href="https://lodash.com/docs">lodash functions</a> are exposed as well: <code>toArray</code>, <code>pluck</code>, <code>flatten</code>, <code>uniq</code>, <code>where</code>, <code>findWhere</code>, <code>compact</code>.</p>

</section>

  <footer class="footer text-center container">
  <hr>
  <p class="copyright">&copy; 2017 <a href="http://www.diegocaponera.com" target="_blank">MWLabs</a>, made w/ <a href="https://moonwave99.github.io/waffel/index.html" target="_blank">waffel</a> and love.</p> 
</footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='https://www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-5216615-10','auto');ga('send','pageview');
</script>
  </body>
</html>
